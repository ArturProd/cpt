<script type="text/javascript">
var event_list = null;
var test;
{#**************************************************************************#}
{# Retreives a list of events from server
{#**************************************************************************#}
function retrieveEvents(year,month)
{
  $.getJSON( Routing.generate('event_get_events_for_month', {year:year, month:month,_locale:_locale}), function(response){
      if (response.status === "ok")
      {         
        event_list = $.parseJSON(response.data).events;

        for(i=0;i<event_list.length;++i)
        {
            retrieveEventView(event_list[i].id);

        }
      }
  });
}
{#**************************************************************************#}
{# Retreives the html view of an event from server
{#**************************************************************************#}
function retrieveEventView(id)
{
    $('#eventcontainer'+id).remove();
           
        jQuery('<div>', {
        id: 'eventcontainer'+id,
        class: 'eventcontainer'
    }).appendTo('#eventcontainer');

    $.get( Routing.generate('event_view', {id:id,_locale:_locale}), function(response){
          if (response.status === "ok")
          {
             $( "#eventcontainer" + id ).html( response.data );
          }
     });
}
{#**************************************************************************#}
{# Onload
{#**************************************************************************#}
$(function() {
    

        
    retrieveEvents(2013,12);
});
</script>
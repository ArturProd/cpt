{# form to submit a new comment #}
<form id="form_comment_{{post_id}}" action="" method="POST" >
    <div class="row-fluid">
        <div class="span9 offset1">
            <input type="hidden" name="post_id" id="post_id" value="{{post_id}}">
            {{ form_widget(form.message) }}
            {{ form_errors(form.message) }}

            {{ form_rest(form) }}
        </div>
        <div class="span2">
            <input type="button" onclick="handle_comment_submit({{post_id}})" value="{{'btn_add_comment'|trans({}, 'CptBlogBundle') }}" id="submit_comment_{{post_id}}" class="btn btn-success"/>
        </div>
     <div id="loading_{{post_id}}" class="loading"></div>
 </form>

{# Toogle the submit button based on the comment textarea value #}
{# this javascript should be placed AFTER the button and text area are created !! #}
<script type="text/javascript">
    {# Disable button on load #}
     $(function() {  
         $("#submit_comment_{{post_id}}").attr("disabled", "disabled");
            {# Toggle the button on key up #}
           $('#form_comment_{{post_id}}').find('#comment_message').keyup(function(){
               var textvalue = $('#form_comment_{{post_id}}').find('#comment_message').val();
               toggle_submit_comment_button(textvalue,{{post_id}});
           });
           {# Toggle the button on change #}
           $('#form_comment_{{post_id}}').find('#comment_message').change(function(){
               var textvalue = $('#form_comment_{{post_id}}').find('#comment_message').val();
               toggle_submit_comment_button(textvalue,{{post_id}});
           });
    });

</script>
